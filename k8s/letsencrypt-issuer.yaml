# Let's Encrypt ClusterIssuer 配置
# 用于自动为前端域名 www.crmbantu.space 颁发证书

apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: letsencrypt-prod
spec:
  acme:
    # Let's Encrypt 生产环境服务器
    server: https://acme-v02.api.letsencrypt.org/directory
    # Let's Encrypt 测试环境服务器（用于测试，避免请求限制）
    # server: https://acme-staging-v02.api.letsencrypt.org/directory
    
    # 邮箱地址（用于接收证书过期通知）
    email: admin@bantu.sbs
    
    # 私钥存储位置
    privateKeySecretRef:
      name: letsencrypt-prod
    
    # HTTP-01 验证方式（推荐，最简单）
    # 支持 traefik ingress controller
    solvers:
    - http01:
        ingress:
          class: traefik
---
# Let's Encrypt 测试环境 ClusterIssuer（可选，用于测试）
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: letsencrypt-staging
spec:
  acme:
    # Let's Encrypt 测试环境服务器
    server: https://acme-staging-v02.api.letsencrypt.org/directory
    email: admin@bantu.sbs
    privateKeySecretRef:
      name: letsencrypt-staging
    solvers:
    - http01:
        ingress:
          class: traefik

